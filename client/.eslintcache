[{"/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/index.js":"1","/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/components/App.js":"2","/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/components/Login.js":"3","/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/components/Chatboard.js":"4","/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/contexts/ConversationsProvider.js":"5","/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/contexts/SocketProvider.js":"6","/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/hooks/useLocalStorage.js":"7","/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/components/Sidebar.js":"8","/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/components/OpenConversation.js":"9","/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/components/Conversations.js":"10","/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/index.js":"11","/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/components/App.js":"12","/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/components/Login.js":"13","/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/components/Chatboard.js":"14","/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/contexts/ConversationsProvider.js":"15","/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/hooks/useLocalStorage.js":"16","/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/contexts/SocketProvider.js":"17","/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/components/Sidebar.js":"18","/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/components/OpenConversation.js":"19","/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/components/Conversations.js":"20"},{"size":253,"mtime":1598975132000,"results":"21","hashOfConfig":"22"},{"size":720,"mtime":1609790366801,"results":"23","hashOfConfig":"22"},{"size":729,"mtime":1609255225291,"results":"24","hashOfConfig":"22"},{"size":444,"mtime":1609790363954,"results":"25","hashOfConfig":"22"},{"size":3783,"mtime":1610487675116,"results":"26","hashOfConfig":"22"},{"size":592,"mtime":1598975132000,"results":"27","hashOfConfig":"22"},{"size":782,"mtime":1609161760626,"results":"28","hashOfConfig":"22"},{"size":1022,"mtime":1609792156305,"results":"29","hashOfConfig":"22"},{"size":2989,"mtime":1610492883481,"results":"30","hashOfConfig":"22"},{"size":2743,"mtime":1610495496752,"results":"31","hashOfConfig":"22"},{"size":253,"mtime":1598975132000,"results":"32","hashOfConfig":"33"},{"size":720,"mtime":1609790366801,"results":"34","hashOfConfig":"33"},{"size":729,"mtime":1609255225291,"results":"35","hashOfConfig":"33"},{"size":444,"mtime":1609790363954,"results":"36","hashOfConfig":"33"},{"size":3783,"mtime":1610487675116,"results":"37","hashOfConfig":"33"},{"size":782,"mtime":1609161760626,"results":"38","hashOfConfig":"33"},{"size":592,"mtime":1598975132000,"results":"39","hashOfConfig":"33"},{"size":1019,"mtime":1610673327538,"results":"40","hashOfConfig":"33"},{"size":2989,"mtime":1610492883481,"results":"41","hashOfConfig":"33"},{"size":2743,"mtime":1610495496752,"results":"42","hashOfConfig":"33"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},"3xdnmb",{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"54","usedDeprecatedRules":"45"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"of1h2g",{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"83","messages":"84","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/index.js",[],["85","86"],"/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/components/App.js",[],"/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/components/Login.js",[],"/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/components/Chatboard.js",[],"/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/contexts/ConversationsProvider.js",["87"],"import React, { useContext, useState, useEffect, useCallback } from 'react'\nimport useLocalStorage from '../hooks/useLocalStorage'\nimport ContactList from '../db/contact.json'\nimport { useSocket } from './SocketProvider'\n\nconst ConversationsContext = React.createContext()\n\nexport function useConversations() {\n  return useContext(ConversationsContext)\n}\n\nexport function ConversationsProvider({ id, children }) {\n  const [conversations, setConversations] = useLocalStorage('conversations', [])\n  const [selectedConversationIndex, setSelectedConversationIndex] = useState()\n  const contactsDB = ContactList\n  const socket = useSocket()\n\n  // Initiate with contacts from the database\n  useEffect(() => {\n    if (conversations.length <= 0) {\n      ContactList.map(contact => {\n        if (contact.id !== id) {\n          setConversations(prevConversations => {\n            return [...prevConversations, { recipients: [contact.id], messages: []}]\n          })\n        }\n      })\n    }\n  }, [id, conversations, setConversations])\n\n  const addMessageToConversation = useCallback(({ recipients, text, sender, hasRead }) => {\n    setConversations(prevConversations => {\n      let madeChange = false\n      const newMessage = { sender, text, hasRead }\n      const newConversations = prevConversations.map(conversation => {\n        if (arrayEquality(conversation.recipients, recipients)) {\n          madeChange = true\n          return {\n            ...conversation,\n            messages: [...conversation.messages, newMessage]\n          }\n        }\n\n        return conversation\n      })\n\n      if (madeChange) {\n        return newConversations\n      } else {\n        return [\n          ...prevConversations,\n          { recipients, messages: [newMessage] }\n        ]\n      }\n    })\n  }, [setConversations])\n\n  useEffect(() => {\n    if (socket == null) return\n\n    socket.on('receive-message', addMessageToConversation)\n\n    return () => socket.off('receive-message')\n  }, [socket, addMessageToConversation])\n\n  function sendMessage(recipients, text) {\n    socket.emit('send-message', { recipients, text })\n\n    addMessageToConversation({ recipients, text, sender: id, hasRead: false })\n  }\n\n  const formattedConversations = conversations.map((conversation, index) => {\n    console.log(\"formattedConversations = \", conversation);\n    const recipients = conversation.recipients.map(recipient => {\n      const contact = contactsDB.find(contact => {\n        return contact.id === recipient\n      })\n      const name = (contact && contact.name) || recipient\n      return { id: recipient, name }\n    })\n\n    const messages = conversation.messages.map(message => {\n      const contact = contactsDB.find(contact => {\n        return contact.id === message.sender\n      })\n      const name = (contact && contact.name) || message.sender\n      const fromMe = id === message.sender\n\n      // In case the conversation is selected or open, the message has been read (flag must be updated)\n      if (index === selectedConversationIndex)\n        message.hasRead = true;\n        \n      return { ...message, senderName: name, fromMe, hasRead: message.hasRead }\n    })\n    \n    const selected = index === selectedConversationIndex\n    return { ...conversation, messages, recipients, selected }\n  })\n\n  const value = {\n    conversations: formattedConversations,\n    selectedConversation: formattedConversations[selectedConversationIndex],\n    sendMessage,\n    selectConversationIndex: setSelectedConversationIndex\n  }\n\n  return (\n    <ConversationsContext.Provider value={value}>\n      {children}\n    </ConversationsContext.Provider>\n  )\n}\n\nfunction arrayEquality(a, b) {\n  if (a.length !== b.length) return false\n\n  a.sort()\n  b.sort()\n\n  return a.every((element, index) => {\n    return element === b[index]\n  })\n}","/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/contexts/SocketProvider.js",[],"/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/hooks/useLocalStorage.js",[],"/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/components/Sidebar.js",[],"/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/components/OpenConversation.js",[],"/Users/rodrigomacedogimenes/Desktop/shoperon/myshoperon-chat/client/src/components/Conversations.js",["88"],"/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/index.js",[],"/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/components/App.js",[],"/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/components/Login.js",[],"/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/components/Chatboard.js",[],"/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/contexts/ConversationsProvider.js",["89"],"/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/hooks/useLocalStorage.js",[],"/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/contexts/SocketProvider.js",[],"/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/components/Sidebar.js",[],"/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/components/OpenConversation.js",[],"/Users/rodrigomacedogimenes/Documents/Udemy/ReactProjects/instant-message-app/client/src/components/Conversations.js",["90"],{"ruleId":"91","replacedBy":"92"},{"ruleId":"93","replacedBy":"94"},{"ruleId":"95","severity":1,"message":"96","line":21,"column":31,"nodeType":"97","messageId":"98","endLine":21,"endColumn":33},{"ruleId":"95","severity":1,"message":"99","line":41,"column":55,"nodeType":"97","messageId":"100","endLine":41,"endColumn":57},{"ruleId":"95","severity":1,"message":"96","line":21,"column":31,"nodeType":"97","messageId":"98","endLine":21,"endColumn":33},{"ruleId":"95","severity":1,"message":"99","line":41,"column":55,"nodeType":"97","messageId":"100","endLine":41,"endColumn":57},"no-native-reassign",["101"],"no-negated-in-lhs",["102"],"array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","Array.prototype.map() expects a value to be returned at the end of arrow function.","expectedAtEnd","no-global-assign","no-unsafe-negation"]